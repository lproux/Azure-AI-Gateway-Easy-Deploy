================================================================================
COMPREHENSIVE DEPENDENCY ANALYSIS (ALL 238 CELLS)
================================================================================

[Phase 1/4] Scanning for variable/function/class definitions...
[Phase 2/4] Scanning for variable/function usages...
[Phase 3/4] Identifying integration patterns...
[Phase 4/4] Building dependency graph...

================================================================================
CRITICAL CONFIGURATION VARIABLES
================================================================================

APIM_GATEWAY_URL:
  Defined in cells: [3, 13, 40]
  Used in cells: [6, 30, 47, 108, 110, 175, 196, 234]
  ⚠️  ISSUE: Defined in 3 cells (should be 1)

APIM_API_KEY:
  Defined in cells: [13, 40, 206]
  Used in cells: [47, 175]
  ⚠️  ISSUE: Defined in 3 cells (should be 1)

RESOURCE_GROUP:
  Defined in cells: [3, 13, 14, 27, 40, 41, 112]
  Used in cells: [9, 13, 14, 17, 27, 46, 53, 63, 72, 107, 112, 219, 232, 233]
  ⚠️  ISSUE: Defined in 7 cells (should be 1)

SUBSCRIPTION_ID:
  Defined in cells: [3, 14, 41]
  Used in cells: [5, 11, 14]
  ⚠️  ISSUE: Defined in 3 cells (should be 1)

LOCATION:
  Defined in cells: [3, 13, 14, 40, 41, 112]
  Used in cells: [13, 14, 112]
  ⚠️  ISSUE: Defined in 6 cells (should be 1)

OPENAI_ENDPOINT:
  Defined in cells: [3, 41]
  Used in cells: [6, 112, 195, 196, 198]
  ⚠️  ISSUE: Defined in 2 cells (should be 1)

ENV:
  Defined in cells: [2, 3, 13]
  Used in cells: [2, 3, 9, 10, 13, 14, 27]
  ⚠️  ISSUE: Defined in 3 cells (should be 1)

az_cli:
  Defined in cells: [17, 18, 27, 31, 32, 46, 53, 63, 72, 107, 112, 219, 232]
  Used in cells: [5, 11, 17, 18, 27, 31, 32, 46, 53, 63, 72, 107, 112, 219, 232]
  ⚠️  ISSUE: Defined in 13 cells (should be 1)

AZ_CLI:
  Defined in cells: [7, 14]
  Used in cells: [5, 7, 11, 14]
  ⚠️  ISSUE: Defined in 2 cells (should be 1)

ENV_FILE:
  Defined in cells: [2, 3, 13, 41]
  Used in cells: [2, 3, 13, 41]
  ⚠️  ISSUE: Defined in 4 cells (should be 1)

================================================================================
CRITICAL FUNCTIONS
================================================================================

ensure_env():
  Defined in cells: [2, 3]
  Called in cells: [2, 3]
  ⚠️  ISSUE: Defined in 2 cells (should be 1)

load_env():
  Defined in cells: [13]
  Called in cells: [13]

az():
  Defined in cells: [7]
  Called in cells: [7, 8, 9, 11, 14]

compile_bicep():
  Defined in cells: [8, 36]
  Called in cells: [8, 11, 36, 38]
  ⚠️  ISSUE: Defined in 2 cells (should be 1)

deploy_template():
  Defined in cells: [8, 36]
  Called in cells: [8, 36, 38]
  ⚠️  ISSUE: Defined in 2 cells (should be 1)

apply_policy():
  Defined in cells: [27]
  Called in cells: [27]

get_deployment_outputs():
  Defined in cells: [8, 36]
  Called in cells: [8, 11, 36, 38, 40]
  ⚠️  ISSUE: Defined in 2 cells (should be 1)

get_az_cli():
  Defined in cells: [17, 32, 46, 53, 63, 72, 107, 112, 219, 232]
  Called in cells: [17, 32, 46, 53, 63, 72, 107, 112, 219, 232]
  ⚠️  ISSUE: Defined in 10 cells (should be 1)

================================================================================
DEPLOYMENT FLOW CELLS
================================================================================
Cells involved in deployment: [1, 8, 11, 13, 17, 22, 23, 30, 34, 36, 38, 40, 41, 46, 47, 53, 65, 72, 73, 107, 108, 110, 112, 114, 137, 163, 167, 173, 175, 177, 188, 196, 208, 211, 219, 220, 232, 233]
Total: 38 cells

================================================================================
TOP 20 MOST USED VARIABLES ACROSS ALL CELLS
================================================================================
get:
  Defined in: [6]
  Used in 52 cells: [5, 6, 7, 8, 9, 10, 11, 13, 14, 17]...
client:
  Defined in: [47, 186]
  Used in 46 cells: [10, 11, 28, 36, 47, 49, 51, 55, 59, 61]...
found:
  Defined in: [193]
  Used in 38 cells: [5, 6, 8, 13, 17, 18, 24, 27, 30, 31]...
response:
  Defined in: [67, 73, 125, 125, 153, 169, 181, 220]
  Used in 38 cells: [47, 51, 53, 55, 57, 61, 65, 67, 69, 72]...
env:
  Defined in: [17, 32, 46, 53, 63, 72, 107, 112, 219, 232]
  Used in 34 cells: [2, 3, 5, 6, 7, 9, 10, 13, 17, 30]...
run:
  Defined in: [165]
  Used in 32 cells: [4, 5, 7, 11, 15, 17, 18, 24, 27, 31]...
message:
  Defined in: [165]
  Used in 24 cells: [36, 47, 51, 65, 67, 69, 73, 100, 110, 114]...
output:
  Defined in: [184, 188, 221]
  Used in 19 cells: [5, 32, 72, 79, 80, 81, 83, 85, 89, 94]...
missing:
  Defined in: [9, 163]
  Used in 18 cells: [4, 5, 6, 8, 9, 11, 13, 15, 40, 41]...
deployment:
  Defined in: [65]
  Used in 18 cells: [8, 11, 13, 30, 36, 38, 47, 65, 73, 107]...
endpoint:
  Defined in: [112]
  Used in 17 cells: [6, 47, 65, 73, 77, 110, 112, 114, 159, 161]...
az_cli:
  Defined in: [17, 18, 27, 31, 32, 46, 53, 63, 72, 107, 112, 219, 232]
  Used in 15 cells: [5, 11, 17, 18, 27, 31, 32, 46, 53, 63]...
text:
  Defined in: [6]
  Used in 15 cells: [6, 11, 38, 57, 65, 91, 108, 110, 114, 137]...
token:
  Defined in: [65]
  Used in 15 cells: [32, 46, 63, 65, 72, 91, 108, 161, 184, 186]...
required:
  Defined in: [163]
  Used in 14 cells: [7, 10, 11, 41, 47, 65, 73, 100, 163, 169]...
RESOURCE_GROUP:
  Defined in: [3, 13, 14, 27, 40, 41, 112]
  Used in 14 cells: [9, 13, 14, 17, 27, 46, 53, 63, 72, 107]...
results:
  Defined in: [151]
  Used in 14 cells: [11, 80, 83, 89, 91, 94, 97, 100, 127, 147]...
prompt:
  Defined in: [114]
  Used in 13 cells: [7, 63, 100, 110, 114, 123, 137, 149, 163, 177]...
policy_xml:
  Defined in: [17, 27, 46, 53, 63, 72, 107, 219, 232]
  Used in 13 cells: [11, 17, 27, 46, 53, 63, 72, 107, 182, 218]...
headers:
  Defined in: [114, 175]
  Used in 13 cells: [11, 55, 91, 108, 110, 114, 161, 175, 184, 195]...

================================================================================
TOP 15 MOST CALLED FUNCTIONS
================================================================================
get_az_cli():
  Defined in: [17, 32, 46, 53, 63, 72, 107, 112, 219, 232]
  Called in 10 cells
az():
  Defined in: [7]
  Called in 5 cells
get_deployment_outputs():
  Defined in: [8, 36]
  Called in 5 cells
compile_bicep():
  Defined in: [8, 36]
  Called in 4 cells
deploy_template():
  Defined in: [8, 36]
  Called in 3 cells
check_deployment_exists():
  Defined in: [8, 36]
  Called in 3 cells
generate_image():
  Defined in: [110, 196]
  Called in 3 cells
get_azure_openai_client():
  Defined in: [235]
  Called in 3 cells
ensure_env():
  Defined in: [2, 3]
  Called in 2 cells
parse_env():
  Defined in: [2, 3]
  Called in 2 cells
is_sensitive():
  Defined in: [2, 13]
  Called in 2 cells
check_resource_group_exists():
  Defined in: [36]
  Called in 2 cells
discover_openai_endpoint():
  Defined in: [195]
  Called in 2 cells
mask():
  Defined in: [2]
  Called in 1 cells
resolve_az_cli():
  Defined in: [5]
  Called in 1 cells

================================================================================
CELLS WITH MOST DEPENDENCIES
================================================================================
Cell 232: depends on 31 cells -> [3, 6, 13, 14, 17, 18, 27, 31, 32, 40]...
Cell 195: depends on 28 cells -> [3, 6, 9, 17, 32, 40, 41, 46, 47, 53]...
Cell 234: depends on 28 cells -> [3, 13, 17, 32, 40, 46, 47, 53, 63, 67]...
Cell 219: depends on 21 cells -> [3, 6, 13, 14, 17, 18, 27, 31, 32, 40]...
Cell 173: depends on 20 cells -> [6, 9, 13, 17, 32, 36, 40, 46, 47, 53]...
Cell 196: depends on 20 cells -> [3, 6, 13, 40, 41, 47, 65, 67, 73, 108]...
Cell 112: depends on 19 cells -> [3, 6, 9, 13, 14, 17, 18, 27, 31, 32]...
Cell 107: depends on 18 cells -> [3, 6, 13, 14, 17, 18, 27, 31, 32, 40]...
Cell 184: depends on 18 cells -> [3, 6, 38, 40, 47, 55, 65, 67, 73, 108]...
Cell 205: depends on 18 cells -> [38, 40, 41, 47, 67, 73, 108, 110, 112, 114]...
Cell 208: depends on 17 cells -> [6, 40, 47, 67, 73, 108, 110, 125, 153, 163]...
Cell 233: depends on 17 cells -> [3, 13, 14, 17, 27, 40, 41, 46, 53, 63]...
Cell 72: depends on 16 cells -> [3, 6, 13, 14, 17, 18, 27, 31, 32, 40]...
Cell 110: depends on 16 cells -> [3, 6, 9, 13, 17, 32, 40, 46, 47, 53]...
Cell 186: depends on 15 cells -> [6, 38, 40, 47, 55, 65, 67, 73, 108, 110]...

================================================================================
ORPHAN CELLS (No dependencies, no dependents)
================================================================================
Found 8 orphan cells: [1, 22, 23, 28, 97, 113, 141, 190]

================================================================================
CLASS DEFINITIONS
================================================================================
AzureOps: defined in cells [11]
DeploymentError: defined in cells [11]
ModelDeploymentError: defined in cells [11]
NotebookConfig: defined in cells [41]
PolicyError: defined in cells [11]

================================================================================
IMPORT ANALYSIS (First 41 cells)
================================================================================
azure.identity: imported in cells [28, 36] [DUPLICATE]
datetime: imported in cells [32, 40] [DUPLICATE]
dotenv: imported in cells [30, 36] [DUPLICATE]
json: imported in cells [5, 32, 36] [DUPLICATE]
notebook_mcp_helpers: imported in cells [22, 23] [DUPLICATE]
os: imported in cells [2, 6, 7, 8, 9, 10, 11, 13, 14, 15, 17, 24, 28, 30, 32, 36, 40, 41] [DUPLICATE]
pathlib: imported in cells [2, 3, 5, 6, 7, 8, 9, 11, 13, 18, 27, 31, 36] [DUPLICATE]
shutil: imported in cells [17, 18, 27, 31, 32, 36] [DUPLICATE]
subprocess: imported in cells [17, 32] [DUPLICATE]
sys: imported in cells [4, 22, 23] [DUPLICATE]
time: imported in cells [17, 36] [DUPLICATE]
typing: imported in cells [2, 11, 13, 41] [DUPLICATE]
